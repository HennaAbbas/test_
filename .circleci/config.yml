version: 2.1

executors:
  nodejs:
    docker:
      - image: cimg/node:16.13.0

parameters:
  branch_name:
    type: string
    default: "develop"


jobs:
  update:
    resource_class: small
    executor: nodejs
    working_directory: ~/app
    steps:
      - checkout

      - run:
          name: echo branch name
          command: echo << pipeline.parameters.branch_name >>

      - run:
          name: Update script
          command: ./update.sh << pipeline.parameters.branch_name >>

workflows:
  update-component:
    jobs:
      - update:
          name: Update
          filters:
            branches:
              only:
                - master
