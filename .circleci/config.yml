version: 2.1
defaults: &defaults
  environment:
    EXTERNAL_REGISTRY_BASE_DOMAIN: '771535030486.dkr.ecr.us-east-1.amazonaws.com'
    DOCKERTAG: 'gmr'
    DATABASE_HOST: '127.0.0.1'
    DATABASE_NAME: 'gmr_test'
    DATABASE_USERNAME: 'gmr'
    DATABASE_PASSWORD: ''
    CYPRESS_PROJECT_ID: '161f641b-e850-400b-93e7-99172e71404b'
    AIRBRAKE_PROJECT_ID: '141108'
    AIRBRAKE_PROJECT_KEY: '0348bbc44df91bb9b438e91257b61bfb'
    REPOSITORY: 'https://github.com/verticalfox/VF'
    CC_TEST_REPORTER_ID: '933e544533c78f2eb4de16e8225814c443716d0b297d2958c6e8cd26a6a816b0'

references:
  deploy_job_defaults: &deploy_job_defaults
    <<: *defaults
    docker:
    - image: circleci/ruby:2.6.5-buster-node
    
  deploy_steps: &deploy_steps
    steps:
    - run: echo "deploy steps"  
    
    
jobs:
  deploy-dev:
    steps: 
      - run: echo "running steps..."
#       - jira/notify:
#               issue_regexp: '[A-Z]{2,30}-[0-9]+'
#               environment_type: development
#               job_type: deployment
      
    <<: *deploy_job_defaults
    environment:
      CONTEXT: development
      ENVIRONMENT: development
    <<: *deploy_steps
      
      
  
      

workflows:
  build:
    jobs:
      - deploy-dev

