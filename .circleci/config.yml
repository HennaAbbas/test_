# Orb 'circleci/sumologic@1.0.6' resolved to 'circleci/sumologic@1.0.6'
version: 2.1



jobs:
  build:
    docker:
      - image: cimg/python:3.8.4
      
    steps:

      - run :
          name : Install Git LFS
          command : |
            curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | sudo bash
            sudo apt-get install git-lfs=2.13.2 -y
            git lfs install       
            
   
  




#       - run: whoami
#       - run:
#           command: |
            
#             git push origin master       
#             echo $HOME
#             ls -la $HOME/automation/scripts/indigo-homebrew-formula-update/      
            
#             set -ex
#             rando=""
#             automation_path="$rando/automation"
#             if [ -d $automation_path ]; then
#               # the automation repo exists
#               if [ -f "$automation_path/.already_updated" ]; then
#                 echo "A previous step has updated the automation repo already - no need to do it again"
#                 cd $automation_path
#                 echo "Current automation sha is $(git rev-parse HEAD)"
#                 exit 0
#               fi
#               echo "The automation repo exists - updating it"
#               sudo chown -R circleci:circleci $automation_path
#               cd $automation_path
#               git remote set-url origin https://autoindigoag:"$GH_TOKEN"@github.com/indigo-ag/automation.git
#               git config user.email "automation@indigoag.com"
#               git config user.name "Automation"
#               git checkout develop
#               git fetch --depth=1 origin develop
#               git reset --hard origin/develop
#             else
#               echo "The automation repo folder does not exist - cloning it"
#               cd $(dirname $automation_path)
#               git clone https://autoindigoag:"$GH_TOKEN"@github.com/indigo-ag/automation.git -b develop --depth 1
#             fi
#             cd $automation_path
#             echo "Current automation sha is $(git rev-parse HEAD)"
#             touch $automation_path/.already_updated            

  test:
    docker:
      - image: circleci/python:3.8.12-node-browsers
      
    steps:
      - run :
          name : Install Git LFS
          command : |
            curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | sudo bash
            sudo apt-get install git-lfs=2.13.2 -y
            git lfs install          
    
            
# # #
workflows:
    build_and_push:
      jobs:
        - build   
        - test

        
#test
      
      

