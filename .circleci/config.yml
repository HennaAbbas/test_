version: 2.1

orbs:
  macos: circleci/macos@2.4.0
  
jobs:
  build:
    macos:
      xcode: 15.0.0
    resource_class: macos.m1.medium.gen1
    
    steps:
      - run: xcodebuild -version
      - run: brew --version
      # - macos/add-uitest-permissions
      - macos/preboot-simulator:
          version: "17.0"
          platform: "iOS"
          device: "iPhone 15 Pro"
      - run: echo $MACOS_ORB_DEVICE_UDID
      - macos/wait-until-simulator-booted
      - run: xcrun simctl shutdown $MACOS_ORB_DEVICE_UDID
      - run: xcrun simctl bootstatus -b $MACOS_ORB_DEVICE_UDID
      
      
workflows:
  say-hello-workflow:
    jobs:
      - build
      
