version: 2.1

orbs:
  node: circleci/node@4.5.0

jobs:
  stress-frontend-e2e-test:
    machine:
      docker_layer_caching: false
      image: ubuntu-2204:current

    steps:
      - checkout
      - persist_to_workspace:
          root: .
          paths:
          - .
  test:
    machine:
      docker_layer_caching: false
      image: ubuntu-2204:current

    steps:
      - checkout
      - attatch_workspace:
          root: .
          paths:
          - .
          when: on_fail

workflows:
  sqlmonitor:
    jobs:
      - stress-frontend-e2e-test
      - test 
