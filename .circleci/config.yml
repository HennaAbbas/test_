version: 2.1
  
jobs:
  build:
    parameters:
      branch:
        type: string
        default: $CIRCLE_BRANCH 
    docker:
      - image: cimg/node:17.2.0
    
    steps:
      - setup_remote_docker
      - run: cat /proc/sys/fs/inotify/max_user_watches


  test:
    docker:
      - image: cimg/node:17.2.0


    steps:
      - run: xcodebuild -version      



workflows:
  say-hello-workflow:
    jobs:
      - test:
          filters:
            tags:
              only: /^pre-.*/   
      - build


