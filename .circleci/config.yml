version: 2.1
parameters:
  api_trigger:
    type: boolean
    default: false
  run_cypress_next_sanity_staging:
    type: boolean
    default: false
jobs: 
  build:
    docker:
     - image: cimg/node:14.16-browsers
    steps:
      - run: echo "hello world"
  test:
    docker:
     - image: cimg/node:14.16-browsers
    steps:
      - run: echo "hello world"
workflows:
  version: 2
  test_workflow: 
    jobs:
      - test
  # Triggered remotely from the API to deploy to a scrum environment
  cypress-next-sanity-staging:
      when:
        and: [<<pipeline.parameters.run_cypress_next_sanity_staging>>, <<pipeline.parameters.api_trigger>>]
      jobs:
        - build
